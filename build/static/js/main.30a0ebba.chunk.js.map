{"version":3,"sources":["reducer.js","api.js","sagas.js","store.js","Signin.jsx","actions.js","App.js","index.js"],"names":["initialState","signinError","signinLoading","name","passwordReset","reducer","state","arguments","length","undefined","action","type","Object","objectSpread","endpoints","signin","password","Api","_ref","data","axios","post","then","response","catch","error","getRequest","saga","prefix","regenerator_default","a","wrap","_context","prev","next","payload","toUpperCase","call","sent","put","concat","user","t0","message","stop","_marked","_context2","takeLatest","_marked2","sagaMiddleware","createSagaMiddleware","composeEnhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","run","Signin","login","handleChange","_ref$target","target","value","_this","setState","defineProperty","props","clearError","clearPassword","handleSubmit","_ref2","nativeEvent","preventDefault","handleRemind","_this2","this","_this$state","_this$props","disabled","active","react_default","createElement","className","onSubmit","event","autoComplete","required","onChange","onClick","Component","connect","ConnectedSignin","document","title","ReactDOM","render","es","getElementById"],"mappings":"yPAAMA,EAAe,CACnBC,aAAa,EACbC,eAAe,EACfC,KAAM,GACNC,eAAe,GA6CFC,EA1CC,WAAkC,IAAjCC,EAAiCC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAzBP,EAAcU,EAAWH,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAChD,OAAQC,EAAOC,MACb,IAAK,iBACL,IAAK,mBACH,OAAOC,OAAAC,EAAA,EAAAD,CAAA,GACFN,EADL,CAEEJ,eAAe,IAEnB,IAAK,2BACH,OAAOU,OAAAC,EAAA,EAAAD,CAAA,GACFN,EADL,CAEEJ,eAAe,EACfC,KAAMO,EAAOP,OAEjB,IAAK,6BACH,OAAOS,OAAAC,EAAA,EAAAD,CAAA,GACFN,EADL,CAEEJ,eAAe,EACfE,eAAe,IAEnB,IAAK,wBACL,IAAK,0BACH,OAAOQ,OAAAC,EAAA,EAAAD,CAAA,GACFN,EADL,CAEEJ,eAAe,EACfD,aAAa,IAEjB,IAAK,cACH,OAAOW,OAAAC,EAAA,EAAAD,CAAA,GACFN,EADL,CAEEL,aAAa,IAEjB,IAAK,iBACH,OAAOW,OAAAC,EAAA,EAAAD,CAAA,GACFN,EADL,CAEEF,eAAe,IAEnB,QACE,OAAOE,8CC3CPQ,EAAY,CAChBC,OAAQ,iDACRC,SAAU,2DAaGC,EAVH,SAAAC,GAAkB,IAAhBf,EAAgBe,EAAhBf,KAAMgB,EAAUD,EAAVC,KAClB,OAAOC,IAAMC,KAAKP,EAAUX,GAAOgB,GAChCG,KAAK,SAAAC,GACJ,OAAOA,EAASJ,OAEjBK,MAAM,SAACC,GACN,MAAMA,gBCTFC,cAsBAC,GAtBV,SAAUD,EAAWhB,GAArB,IAAAP,EAAAyB,EAAAL,EAAA,OAAAM,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAIqB,OAHZ/B,EAAQO,EAAOyB,QAAfhC,KACDyB,EAASzB,EAAKiC,cAFtBJ,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAI2BG,YAAKpB,EAAKP,EAAOyB,SAJ5C,UAK0B,OADhBZ,EAJVS,EAAAM,MAKiBb,MALjB,CAAAO,EAAAE,KAAA,SAMM,OANNF,EAAAE,KAAA,EAMYK,YAAI,CACR5B,KAAI,GAAA6B,OAAKZ,EAAL,qBAPZ,OAAAI,EAAAE,KAAA,iBAUM,OAVNF,EAAAE,KAAA,GAUYK,YAAI,CACR5B,KAAI,GAAA6B,OAAKZ,EAAL,sBACJzB,KAAe,WAATA,EAAoBoB,EAASJ,KAAKsB,KAAKtC,KAAO,KAZ5D,QAAA6B,EAAAE,KAAA,iBAgBI,OAhBJF,EAAAC,KAAA,GAAAD,EAAAU,GAAAV,EAAA,SAAAA,EAAAE,KAAA,GAgBUK,YAAI,CACR5B,KAAI,GAAA6B,OAAKZ,EAAL,mBAA8Be,QAASX,EAAAU,GAAEC,UAjBnD,yBAAAX,EAAAY,SAAAC,EAAA,eAsBA,SAAUlB,IAAV,OAAAE,EAAAC,EAAAC,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,OACE,OADFY,EAAAZ,KAAA,EACQa,YAAW,iBAAkBrB,GADrC,OAEE,OAFFoB,EAAAZ,KAAA,EAEQa,YAAW,mBAAoBrB,GAFvC,wBAAAoB,EAAAF,SAAAI,GAKerB,QCzBTsB,EAAiBC,cACjBC,EAAkBC,OAAOC,sCAAwCC,IAEjEC,EAAQC,YACZnD,EACA8C,EAAgBM,YAAgBR,KAGlCA,EAAeS,IAAI/B,GAEJ4B,gECVTI,6MAWJrD,MAAQ,CACNsD,MAAO,GACP5C,SAAU,MAGZ6C,aAAe,SAAA3C,GAA6B,IAAA4C,EAAA5C,EAA3B6C,OAAS5D,EAAkB2D,EAAlB3D,KAAM6D,EAAYF,EAAZE,MAC9BC,EAAKC,SAALtD,OAAAC,EAAA,EAAAD,CAAA,GACKqD,EAAK3D,MADVM,OAAAuD,EAAA,EAAAvD,CAAA,GAEGT,EAAO6D,IACP,WACDC,EAAKG,MAAMnE,aAAegE,EAAKG,MAAMC,cACpClE,EAA4B,KAAV6D,IAAiBC,EAAKG,MAAME,qBAInDC,aAAe,SAAAC,GAAmBA,EAAjBC,YACHC,iBACZT,EAAKG,MAAM1C,WAAW,CAACvB,KAAM,SAAUgB,KAAM8C,EAAK3D,WAGpDqE,aAAe,WACbV,EAAKG,MAAM1C,WAAW,CAACvB,KAAM,WAAYgB,KAAM,CAACyC,MAAOK,EAAK3D,MAAMsD,kFAG3D,IAAAgB,EAAAC,KAAAC,EACqBD,KAAKvE,MAAzBsD,EADDkB,EACClB,MAAO5C,EADR8D,EACQ9D,SADR+D,EAEqDF,KAAKT,MAAzDjE,EAFD4E,EAEC5E,KAAMC,EAFP2E,EAEO3E,cAAeF,EAFtB6E,EAEsB7E,cAAeD,EAFrC8E,EAEqC9E,YACtC+E,EAAW/E,IAAiB2D,EAAMpD,SAAWQ,EAASR,QAAWN,EACjE+E,GAAUrB,EAAMpD,QAAUQ,EAASR,UAAYN,EACrD,OAAIC,EAAKK,OAAS,EAEhB0E,EAAApD,EAAAqD,cAAA,OAAKC,UAAU,mBACbF,EAAApD,EAAAqD,cAAA,OAAKC,UAAU,kBACbF,EAAApD,EAAAqD,cAAA,OAAKC,UAAU,kBAAf,+FACmBF,EAAApD,EAAAqD,cAAA,WAAKD,EAAApD,EAAAqD,cAAA,SAAIhF,GAD5B,OAQJ+E,EAAApD,EAAAqD,cAAA,OAAKC,UAAU,mBACbF,EAAApD,EAAAqD,cAAA,OAAKC,UAAU,kBACbF,EAAApD,EAAAqD,cAAA,QAAME,SAAU,SAAAC,GAAK,OAAIV,EAAKL,aAAae,KACzCJ,EAAApD,EAAAqD,cAAA,OAAKC,UAAU,eACbF,EAAApD,EAAAqD,cAAA,sCACAD,EAAApD,EAAAqD,cAAA,OAAKC,UAAU,cACbF,EAAApD,EAAAqD,cAAA,SAAOC,UAAU,SACfF,EAAApD,EAAAqD,cAAA,QAAMC,UAAU,eAAhB,8GAGAF,EAAApD,EAAAqD,cAAA,QAAMC,UAAU,iBACdF,EAAApD,EAAAqD,cAAA,SACEC,UAAU,cACVG,aAAa,MACbpF,KAAK,QACLQ,KAAK,OACL6E,UAAQ,EACRC,SAAU,SAAAH,GAAK,OAAIV,EAAKf,aAAayB,IACrCtB,MAAOJ,IACTsB,EAAApD,EAAAqD,cAAA,QAAMC,UAAU,mBAItBF,EAAApD,EAAAqD,cAAA,OAAKC,UAAU,cACbF,EAAApD,EAAAqD,cAAA,SAAOC,UAAU,SACfF,EAAApD,EAAAqD,cAAA,QAAMC,UAAU,eAAhB,wCAGAF,EAAApD,EAAAqD,cAAA,QAAMC,UAAU,iBACdF,EAAApD,EAAAqD,cAAA,SACEC,UAAU,cACVG,aAAa,MACbpF,KAAK,WACLQ,KAAMP,EAAgB,OAAS,WAC/BoF,UAAQ,EACRR,SAAU5E,EACVqF,SAAU,SAAAH,GAAK,OAAIV,EAAKf,aAAayB,IACrCtB,MAAO5D,EAAgB,mJAA+BY,IACxDkE,EAAApD,EAAAqD,cAAA,QAAMC,UAAU,gBAChBF,EAAApD,EAAAqD,cAAA,QACEC,UAAS,iBAAA5C,OAAmByC,EAAS,SAAW,IAChDS,QAAST,EAASJ,KAAKF,aAAe,MAFxC,8DASRO,EAAApD,EAAAqD,cAAA,OAAKC,UAAU,iBACbF,EAAApD,EAAAqD,cAAA,UACEC,UAAU,yBACVzE,KAAK,SACLqE,SAAUA,GAHZ,iGAOD/E,GACCiF,EAAApD,EAAAqD,cAAA,QAAMC,UAAU,gBAAhB,6KA7GOO,aA4HNC,cAJS,SAAAtF,GACtB,MAAO,CAAEA,UAKT,CAAEoB,WCpIsB,SAACS,GAAY,IAC9BhC,EAAQgC,EAARhC,KACP,MAAO,CAAEQ,KAAI,GAAA6B,OAAKrC,EAAKiC,cAAV,YAAmCD,YDkIlCkC,WC/HU,SAAClC,GACzB,MAAO,CAAExB,KAAM,cAAewB,YD8HJmC,cC3HC,SAACnC,GAC5B,MAAO,CAAExB,KAAM,oBDwHFiF,CAGbjC,GE7HIkC,EAAkBD,YAAQ,SAAAtF,GAC9B,OAAOA,GADesF,CAErBjC,GCLHmC,SAASC,MAAQ,0IACjBC,IAASC,OAAOf,EAAApD,EAAAqD,cDMD,WACb,OACED,EAAApD,EAAAqD,cAAA,OAAKC,UAAU,OACbF,EAAApD,EAAAqD,cAAA,OAAKC,UAAU,gBACbF,EAAApD,EAAAqD,cAACe,EAAA,EAAD,CAAU3C,MAAOA,GACf2B,EAAApD,EAAAqD,cAACU,EAAD,UCXM,MAASC,SAASK,eAAe","file":"static/js/main.30a0ebba.chunk.js","sourcesContent":["const initialState = {\n  signinError: false,\n  signinLoading: false,\n  name: '',\n  passwordReset: false\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'SIGNIN_REQUEST':\n    case 'PASSWORD_REQUEST':\n      return {\n        ...state,\n        signinLoading: true\n      };\n    case 'SIGNIN_REQUEST_SUCCEEDED':\n      return {\n        ...state,\n        signinLoading: false,\n        name: action.name\n      };\n    case 'PASSWORD_REQUEST_SUCCEEDED':\n      return {\n        ...state,\n        signinLoading: false,\n        passwordReset: true\n      };\n    case 'SIGNIN_REQUEST_FAILED':\n    case 'PASSWORD_REQUEST_FAILED':\n      return {\n        ...state,\n        signinLoading: false,\n        signinError: true\n      };\n    case 'CLEAR_ERROR':\n      return {\n        ...state,\n        signinError: false\n      };\n    case 'CLEAR_PASSWORD':\n      return {\n        ...state,\n        passwordReset: false\n      };\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import axios from 'axios';\n\nconst endpoints = {\n  signin: 'http://mrkt.little.team/api/public/users/login',\n  password: 'http://mrkt.little.team/api/public/users/reset-password'\n};\n\nconst Api = ({name, data}) => {\n  return axios.post(endpoints[name], data)\n    .then(response => {\n      return response.data\n    })\n    .catch((error) => {\n      throw error\n    });\n};\n\nexport default Api;\n","import { call, put, takeLatest } from 'redux-saga/effects';\n\nimport Api from './api';\n\nfunction* getRequest(action) {\n  const {name} = action.payload\n  const prefix = name.toUpperCase();\n  try {\n    const response = yield call(Api, action.payload);\n    if (response.error != null) {\n      yield put({\n        type: `${prefix}_REQUEST_FAILED`\n      });\n    } else {\n      yield put({\n        type: `${prefix}_REQUEST_SUCCEEDED`,\n        name: name === 'signin' ? response.data.user.name : ''\n      });\n    }\n  } catch (e) {\n    yield put({\n      type: `${prefix}_REQUEST_FAILED`, message: e.message\n    });\n  }\n};\n\nfunction* saga() {\n  yield takeLatest('SIGNIN_REQUEST', getRequest);\n  yield takeLatest('PASSWORD_REQUEST', getRequest);\n};\n\nexport default saga;\n\n\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\n\nimport reducer from './reducer';\nimport saga from './sagas';\n\nconst sagaMiddleware = createSagaMiddleware();\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(\n  reducer,\n  composeEnhancer(applyMiddleware(sagaMiddleware))\n);\n\nsagaMiddleware.run(saga);\n\nexport default store;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\n\nimport { getRequest, clearError, clearPassword } from './actions';\n\nclass Signin extends Component {\n  static propTypes = {\n    signinLoading: PropTypes.bool,\n    signinError: PropTypes.bool,\n    passwordReset: PropTypes.bool,\n    name: PropTypes.string,\n    getRequest: PropTypes.func,\n    clearError: PropTypes.func,\n    clearPassword: PropTypes.func\n  };\n\n  state = {\n    login: '',\n    password: ''\n  };\n\n  handleChange = ({target: {name, value}}) => {\n    this.setState({\n      ...this.state,\n      [name]: value\n    }, () => {\n      this.props.signinError && this.props.clearError();\n      (name = 'login' && value === '') && this.props.clearPassword();\n    });\n  };\n\n  handleSubmit = ({nativeEvent}) => {\n    nativeEvent.preventDefault();\n    this.props.getRequest({name: 'signin', data: this.state});\n  };\n\n  handleRemind = () => {\n    this.props.getRequest({name: 'password', data: {login: this.state.login}});\n  };\n\n  render() {\n    const { login, password } = this.state;\n    const { name, passwordReset, signinLoading, signinError } = this.props;\n    const disabled = signinError || (!login.length || !password.length) || signinLoading;\n    const active = (login.length || password.length) && !signinLoading;\n    if (name.length > 0) {\n      return (\n      <div className='signin is-ready'>\n        <div className='signin-content'>\n          <div className='signin-welcome'>\n            Добро пожаловать,<br/><b>{name}</b>!\n          </div>\n        </div>\n      </div>\n      );\n    }\n    return (\n      <div className='signin is-ready'>\n        <div className='signin-content'>\n          <form onSubmit={event => this.handleSubmit(event)}>\n            <div className='signin-main'>\n              <h2>Вход</h2>\n              <div className='signin-row'>\n                <label className='input'>\n                  <span className='input-label'>\n                    Эл. почта или телефон\n                  </span>\n                  <span className='input-wrapper'>\n                    <input\n                      className='input-field'\n                      autoComplete='off'\n                      name='login'\n                      type='text'\n                      required\n                      onChange={event => this.handleChange(event)}\n                      value={login}/>\n                    <span className='input-focus'/>\n                  </span>\n                </label>\n              </div>\n              <div className='signin-row'>\n                <label className='input'>\n                  <span className='input-label'>\n                    Пароль\n                  </span>\n                  <span className='input-wrapper'>\n                    <input\n                      className='input-field'\n                      autoComplete='off'\n                      name='password'\n                      type={passwordReset ? 'text' : 'password'}\n                      required\n                      disabled={passwordReset}\n                      onChange={event => this.handleChange(event)}\n                      value={passwordReset ? 'Ссылка отправлена на почту' : password}/>\n                    <span className='input-focus'/>\n                    <span\n                      className={`signin-remind ${active ? 'active' : ''}`}\n                      onClick={active ? this.handleRemind : null}>\n                      Напомнить\n                    </span>\n                  </span>\n                </label>\n              </div>\n            </div>\n            <div className='signin-bottom'>\n              <button\n                className='btn btn--blue btn--big'\n                type='submit'\n                disabled={disabled}>\n                Войти на площадку\n              </button>\n            </div>\n            {signinError &&\n              <span className='signin-error'>\n                Неправильный логин или пароль\n              </span>\n            }\n          </form>\n        </div>\n      </div>\n    );\n  }\n};\n\nconst mapStateToProps = state => {\n  return { state };\n};\n\nexport default connect(\n  mapStateToProps,\n  { getRequest, clearError, clearPassword }\n)(Signin);\n","export const getRequest = (payload) => {\n  const {name} = payload;\n  return { type: `${name.toUpperCase()}_REQUEST`, payload}\n};\n\nexport const clearError = (payload) => {\n  return { type: 'CLEAR_ERROR', payload}\n};\n\nexport const clearPassword = (payload) => {\n  return { type: 'CLEAR_PASSWORD'}\n};\n","import React from 'react';\nimport { Provider, connect } from 'react-redux';\n\nimport store from './store';\n\nimport './App.scss';\nimport Signin from './Signin';\n\nconst ConnectedSignin = connect(state => {\n  return state;\n})(Signin);\n\nexport default function App() {\n  return (\n    <div className='app'>\n      <div className='appContainer'>\n        <Provider store={store}>\n          <ConnectedSignin/>\n        </Provider>\n      </div>\n    </div>\n  )\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\ndocument.title = 'Торговая площадка — Войти';\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}